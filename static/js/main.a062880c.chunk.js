(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={Overlay:"Modal_Overlay__Q6RRi",Modal:"Modal_Modal__1NBdm"}},14:function(e,t,a){e.exports={Button:"Button_Button__gw9-W"}},19:function(e,t,a){},4:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__1uJhM",SearchForm:"Searchbar_SearchForm__24rFt",SearchFormButton:"Searchbar_SearchFormButton__2eqMW",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__3woeC",SearchFormInput:"Searchbar_SearchFormInput__11u97"}},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=(a(19),a(3)),u=a(4),s=a.n(u),l=a(1);function m(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(i.a)(a,2),c=r[0],o=r[1];return Object(l.jsx)("header",{className:s.a.Searchbar,children:Object(l.jsxs)("form",{className:s.a.SearchForm,onSubmit:function(e){e.preventDefault(),t(c),o("")},children:[Object(l.jsx)("button",{type:"submit",className:s.a.SearchFormButton,children:Object(l.jsx)("span",{className:s.a.SearchFormButtonLabel,children:"Search"})}),Object(l.jsx)("input",{className:s.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){o(e.target.value)},value:c})]})})}var j=a(11),h=(a(21),a(13)),b=a.n(h),d=a(9),f=a.n(d);function g(e){var t=e.src,a=e.alt,n=e.onClick,r=e.id;return Object(l.jsx)("li",{className:f.a.ImageGalleryItem,onClick:function(){n(t,a,r)},children:Object(l.jsx)("img",{src:t,alt:a,className:f.a.ImageGalleryItemImage,id:r})})}var O=a(7),p=a.n(O);function _(e,t){var a="".concat("https://pixabay.com/api/","?q=").concat(e,"&page=").concat(t,"&key=").concat("22667057-2dc7c959a5419833a30fef1e8","&image_type=photo&orientation=horizontal&per_page=12");return fetch(a)}var S=a(14),v=a.n(S);function I(e){var t=e.onClick;return Object(l.jsx)("button",{type:"button",className:v.a.Button,onClick:t,children:"Load more"})}var x=a(10),y=a.n(x);function w(e){var t=e.onClose,a=e.onLeft,r=e.onRight,c=e.src,o=e.tags;Object(n.useEffect)((function(){return window.addEventListener("keydown",i),function(){window.removeEventListener("keydown",i)}}));var i=function(e){"Escape"===e.code?t():"ArrowLeft"===e.code?a():"ArrowRight"===e.code&&r()};return Object(l.jsx)("div",{className:y.a.Overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(l.jsx)("div",{children:Object(l.jsx)("img",{src:c,alt:o,className:y.a.Modal})})})}function k(e){var t=e.query,a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],o=r[1],u=Object(n.useState)("idle"),s=Object(i.a)(u,2),m=s[0],h=s[1],d=Object(n.useState)(1),f=Object(i.a)(d,2),O=f[0],S=f[1],v=Object(n.useState)(!1),x=Object(i.a)(v,2),y=x[0],k=x[1],F=Object(n.useState)(null),L=Object(i.a)(F,2),N=L[0],G=L[1],B=Object(n.useState)(""),C=Object(i.a)(B,2),R=C[0],E=C[1],M=Object(n.useState)(""),q=Object(i.a)(M,2),U=q[0],A=q[1],W=Object(n.useState)(""),J=Object(i.a)(W,2),T=J[0],P=J[1],z=Object(n.useState)(""),D=Object(i.a)(z,2),H=D[0],Q=D[1];Object(n.useEffect)((function(){""!==t&&(h("pending"),_(t).then((function(e){return e.ok?e.json():Promise.reject(new Error("no images on request"))})).then((function(e){var a=e.hits;if(0===a.length)h("rejected");else{var n=K(a);o(n),h("resolved"),S((function(e){return e+1})),G(t)}})).catch((function(e){h("rejected"),console.log(e)})))}),[t]);var K=function(e){var t=[];return e.forEach((function(e){var a=e.id,n=e.largeImageURL,r=e.tags;t.push({id:a,largeImageURL:n,tags:r})})),t},V=function(){k((function(e){return!e})),E("")},X=function(e,t,a){P(e),Q(t),V(),c.map((function(e,t){return e.id===a&&A(t),""}))};return"idle"===m?"":"pending"===m?Object(l.jsx)(b.a,{type:"Audio",color:"#3f51b5",height:100,width:100,timeout:3e5,style:{textAlign:"center",paddingTop:"25px"}}):"rejected"===m?Object(l.jsxs)("p",{className:p.a.p,children:['Sorry, "',t,'" not found']}):"resolved"===m?Object(l.jsxs)("div",{className:p.a.wrapper,children:[y&&Object(l.jsx)(w,{onClose:V,onLeft:function(){U>0&&(E(c[U-1].largeImageURL),A((function(e){return e-1})))},onRight:function(){U<c.length-1&&(E(c[U+1].largeImageURL),A((function(e){return e+1})))},src:R||T,tags:H}),Object(l.jsx)("ul",{className:p.a.ImageGallery,children:c.map((function(e){var t=e.largeImageURL,a=e.tags,n=e.id;return Object(l.jsx)(g,{src:t,alt:a,onClick:X,id:n},n)}))}),Object(l.jsx)(I,{onClick:function(){_(N,O).then((function(e){return e.json()})).then((function(e){var t=e.hits,a=K(t);o((function(e){return[].concat(Object(j.a)(e),Object(j.a)(a))})),S((function(e){return e+1}))})).then((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){h("rejected"),console.log(e)}))}})]}):void 0}function F(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(m,{onSubmit:function(e){r(e)}}),Object(l.jsx)(k,{query:a})]})}o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(F,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__316um",p:"ImageGallery_p__P1ye2",wrapper:"ImageGallery_wrapper__ikWNj"}},9:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2fSWO",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__3L75w"}}},[[42,1,2]]]);
//# sourceMappingURL=main.a062880c.chunk.js.map